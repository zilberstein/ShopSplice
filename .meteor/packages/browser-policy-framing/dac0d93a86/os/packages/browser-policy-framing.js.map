{"version":3,"file":"/packages/browser-policy-framing.js","sources":["browser-policy-framing/browser-policy-framing.js"],"names":[],"mappings":";;;;;;;;AAAA,+E;AACA,8C;AACA,E;AACA,oD;AACA,mC;AACA,iD;AACA,2C;;AAEA,wC;AACA,yC;;AAEA,2B;;AAEA,iC;AACA,kD;AACA,wC;AACA,yB;AACA,I;AACA,uB;AACA,yC;AACA,I;;AAEA,yB;AACA,2B;AACA,I;AACA,kD;AACA,uC;AACA,oE;AACA,6E;AACA,+B;AACA,mE;AACA,4E;AACA,0C;AACA,2C;AACA,I;AACA,yB;AACA,yB;AACA,G;AACA,G","sourcesContent":["// By adding this package, you get a default policy where only web pages on the\n// same origin as your app can frame your app.\n//\n// For controlling which origins can frame this app,\n// BrowserPolicy.framing.disallow()\n// BrowserPolicy.framing.restrictToOrigin(origin)\n// BrowserPolicy.framing.allowByAnyOrigin()\n\nvar defaultXFrameOptions = \"SAMEORIGIN\";\nvar xFrameOptions = defaultXFrameOptions;\n\nBrowserPolicy.framing = {};\n\n_.extend(BrowserPolicy.framing, {\n  // Exported for tests and browser-policy-common.\n  _constructXFrameOptions: function () {\n    return xFrameOptions;\n  },\n  _reset: function () {\n    xFrameOptions = defaultXFrameOptions;\n  },\n\n  disallow: function () {\n    xFrameOptions = \"DENY\";\n  },\n  // ALLOW-FROM not supported in Chrome or Safari.\n  restrictToOrigin: function (origin) {\n    // Trying to specify two allow-from throws to prevent users from\n    // accidentally overwriting an allow-from origin when they think they are\n    // adding multiple origins.\n    if (xFrameOptions && xFrameOptions.indexOf(\"ALLOW-FROM\") === 0)\n      throw new Error(\"You can only specify one origin that is allowed to\" +\n                      \" frame this app.\");\n    xFrameOptions = \"ALLOW-FROM \" + origin;\n  },\n  allowAll: function () {\n    xFrameOptions = null;\n  }\n});\n"]}