{"version":3,"file":"/packages/browser-policy-common.js","sources":["browser-policy-common/browser-policy-common.js"],"names":[],"mappings":";;;;;;;;AAAA,mB;;AAEA,mB;;AAEA,0C;AACA,gB;AACA,E;;AAEA,6C;AACA,gB;AACA,E;;AAEA,sD;AACA,yE;AACA,mC;AACA,kB;;AAEA,8C;AACA,wD;AACA,oC;AACA,8C;AACA,oB;AACA,oD;AACA,U;AACA,kD;AACA,S;AACA,G","sourcesContent":["BrowserPolicy = {};\n\nvar inTest = false;\n\nBrowserPolicy._runningTest = function () {\n  return inTest;\n};\n\nBrowserPolicy._setRunningTest = function () {\n  inTest = true;\n};\n\nWebApp.connectHandlers.use(function (req, res, next) {\n  // Never set headers inside tests because they could break other tests.\n  if (BrowserPolicy._runningTest())\n    return next();\n\n  var xFrameOptions = BrowserPolicy.framing &&\n        BrowserPolicy.framing._constructXFrameOptions();\n  var csp = BrowserPolicy.content &&\n        BrowserPolicy.content._constructCsp();\n  if (xFrameOptions)\n    res.setHeader(\"X-Frame-Options\", xFrameOptions);\n  if (csp)\n    res.setHeader(\"Content-Security-Policy\", csp);\n  next();\n});\n"]}